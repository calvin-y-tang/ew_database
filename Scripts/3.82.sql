/*
Deployment script for sTargetDB

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
/*
:setvar DatabaseName "sTargetDB"
:setvar DefaultFilePrefix "sTargetDB"
:setvar DefaultDataPath ""
:setvar DefaultLogPath ""
*/

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
USE [$(DatabaseName)];


GO

IF (SELECT OBJECT_ID('tempdb..#tmpErrors')) IS NOT NULL DROP TABLE #tmpErrors
GO
CREATE TABLE #tmpErrors (Error int)
GO
SET XACT_ABORT ON
GO
SET TRANSACTION ISOLATION LEVEL READ COMMITTED
GO
BEGIN TRANSACTION
GO
PRINT N'Dropping [dbo].[tblCaseSLARuleDetail].[IX_U_tblCaseSLARuleDetail_CaseNbrSLARuleDetailID]...';


GO
DROP INDEX [IX_U_tblCaseSLARuleDetail_CaseNbrSLARuleDetailID]
    ON [dbo].[tblCaseSLARuleDetail];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[tblCompanyCertifiedMail].[IX_U_tblCompanyCertifiedMail_CompanyCodeCaseTypeCodeCertMailActionID]...';


GO
DROP INDEX [IX_U_tblCompanyCertifiedMail_CompanyCodeCaseTypeCodeCertMailActionID]
    ON [dbo].[tblCompanyCertifiedMail];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[tblConfirmationResult].[IX_tblConfirmationResult_ConfirmationSystemIDExtResultCode]...';


GO
DROP INDEX [IX_tblConfirmationResult_ConfirmationSystemIDExtResultCode]
    ON [dbo].[tblConfirmationResult];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[tblDoctorBlockTimeDay].[IX_U_tblDoctorBlockTimeDay_ScheduleDateDoctorCodeLocationCode]...';


GO
DROP INDEX [IX_U_tblDoctorBlockTimeDay_ScheduleDateDoctorCodeLocationCode]
    ON [dbo].[tblDoctorBlockTimeDay];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[tblEWTimeZone].[IX_U_EWTimeZone_Name]...';


GO
DROP INDEX [IX_U_EWTimeZone_Name]
    ON [dbo].[tblEWTimeZone];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[tblEWTimeZoneAdjustmentRule].[IX_U_EWTimeZoneAdjustmentRule_EWTimeZoneID_DateStart_DateEnd]...';


GO
DROP INDEX [IX_U_EWTimeZoneAdjustmentRule_EWTimeZoneID_DateStart_DateEnd]
    ON [dbo].[tblEWTimeZoneAdjustmentRule];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[tblExternalCommunications].[IX_tblExternalCommunications_BulkBilling_CommSent]...';


GO
DROP INDEX [IX_tblExternalCommunications_BulkBilling_CommSent]
    ON [dbo].[tblExternalCommunications];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[tblExternalCommunications].[IX_tblExternalCommunications_CaseNbr_CHID]...';


GO
DROP INDEX [IX_tblExternalCommunications_CaseNbr_CHID]
    ON [dbo].[tblExternalCommunications];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[tblLock].[IX_U_tblLock_TableTypeTableKey]...';


GO
DROP INDEX [IX_U_tblLock_TableTypeTableKey]
    ON [dbo].[tblLock];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[tblOfficeContact].[IX_U_tblOfficeContact_OfficeCodeDepartmentLineOfBusiness]...';


GO
DROP INDEX [IX_U_tblOfficeContact_OfficeCodeDepartmentLineOfBusiness]
    ON [dbo].[tblOfficeContact];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[tblSession].[IX_U_tblSession_SessionID]...';


GO
DROP INDEX [IX_U_tblSession_SessionID]
    ON [dbo].[tblSession];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[tblWorkstation].[IX_U_tblWorkstation_WorkstationName]...';


GO
DROP INDEX [IX_U_tblWorkstation_WorkstationName]
    ON [dbo].[tblWorkstation];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[DF_tblAcctOuote_ApproveViaEmail]...';


GO
ALTER TABLE [dbo].[tblAcctQuote] DROP CONSTRAINT [DF_tblAcctOuote_ApproveViaEmail];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[DF_tblAcctOuote_ApproveViaFax]...';


GO
ALTER TABLE [dbo].[tblAcctQuote] DROP CONSTRAINT [DF_tblAcctOuote_ApproveViaFax];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[DF_tblAcctOuote_ApproveViaPhone]...';


GO
ALTER TABLE [dbo].[tblAcctQuote] DROP CONSTRAINT [DF_tblAcctOuote_ApproveViaPhone];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[DF_tblAcctOuote_InformViaEmail]...';


GO
ALTER TABLE [dbo].[tblAcctQuote] DROP CONSTRAINT [DF_tblAcctOuote_InformViaEmail];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[DF_tblAcctOuote_InformViaFax]...';


GO
ALTER TABLE [dbo].[tblAcctQuote] DROP CONSTRAINT [DF_tblAcctOuote_InformViaFax];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[DF_tblAcctOuote_InformViaPhone]...';


GO
ALTER TABLE [dbo].[tblAcctQuote] DROP CONSTRAINT [DF_tblAcctOuote_InformViaPhone];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping unnamed constraint on [dbo].[tblCaseSLAAction]...';


GO
ALTER TABLE [dbo].[tblCaseSLAAction] DROP CONSTRAINT ;


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping unnamed constraint on [dbo].[tblCaseSLARuleDetail]...';


GO
ALTER TABLE [dbo].[tblCaseSLARuleDetail] DROP CONSTRAINT ;


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[DF_tblDoctorBlockTimeDayActive]...';


GO
ALTER TABLE [dbo].[tblDoctorBlockTimeDay] DROP CONSTRAINT [DF_tblDoctorBlockTimeDayActive];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[DF_tblExceptionDefinition_SLARuleDetail]...';


GO
ALTER TABLE [dbo].[tblExceptionDefinition] DROP CONSTRAINT [DF_tblExceptionDefinition_SLARuleDetail];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[DF_tblNotifyAudience_DefaultValue]...';


GO
ALTER TABLE [dbo].[tblNotifyAudience] DROP CONSTRAINT [DF_tblNotifyAudience_DefaultValue];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping unnamed constraint on [dbo].[tblSLAAction]...';


GO
ALTER TABLE [dbo].[tblSLAAction] DROP CONSTRAINT ;


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping unnamed constraint on [dbo].[tblSLAAction]...';


GO
ALTER TABLE [dbo].[tblSLAAction] DROP CONSTRAINT ;


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[DF_tblCaseRecRetrievalDocument_RetrievalStatusID]...';


GO
ALTER TABLE [dbo].[tblCaseRecRetrievalDocument] DROP CONSTRAINT [DF_tblCaseRecRetrievalDocument_RetrievalStatusID];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[DF_tblWorkstation_LoginCount]...';


GO
ALTER TABLE [dbo].[tblWorkstation] DROP CONSTRAINT [DF_tblWorkstation_LoginCount];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Starting rebuilding table [dbo].[tblAutoProvisionLog]...';


GO
BEGIN TRANSACTION;

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

SET XACT_ABORT ON;

CREATE TABLE [dbo].[tmp_ms_xx_tblAutoProvisionLog] (
    [APLogID]            INT            IDENTITY (1, 1) NOT NULL,
    [EntityType]         CHAR (2)       NOT NULL,
    [EntityID]           INT            NULL,
    [WebUserID]          INT            NULL,
    [APType]             CHAR (8)       NOT NULL,
    [Result]             VARCHAR (32)   NULL,
    [Details]            VARCHAR (4096) NULL,
    [Param1Name]         VARCHAR (32)   NULL,
    [Param1Value]        VARCHAR (255)  NULL,
    [Param2Name]         VARCHAR (32)   NULL,
    [Param2Value]        VARCHAR (255)  NULL,
    [Param3Name]         VARCHAR (32)   NULL,
    [Param3Value]        VARCHAR (255)  NULL,
    [Param4Name]         VARCHAR (32)   NULL,
    [Param4Value]        VARCHAR (255)  NULL,
    [Param5Name]         VARCHAR (32)   NULL,
    [Param5Value]        VARCHAR (255)  NULL,
    [DateAdded]          DATETIME       NOT NULL,
    [UserIDAdded]        VARCHAR (20)   NOT NULL,
    [DateAcknowledged]   DATETIME       NULL,
    [UserIDAcknowledged] VARCHAR (20)   NULL,
    CONSTRAINT [tmp_ms_xx_constraint_PK_tblAutoProvisionLog1] PRIMARY KEY CLUSTERED ([APLogID] ASC)
);

IF EXISTS (SELECT TOP 1 1 
           FROM   [dbo].[tblAutoProvisionLog])
    BEGIN
        SET IDENTITY_INSERT [dbo].[tmp_ms_xx_tblAutoProvisionLog] ON;
        INSERT INTO [dbo].[tmp_ms_xx_tblAutoProvisionLog] ([APLogID], [EntityType], [EntityID], [WebUserID], [APType], [Result], [Details], [Param1Name], [Param1Value], [Param2Name], [Param2Value], [Param3Name], [Param3Value], [Param4Name], [Param4Value], [Param5Name], [Param5Value], [DateAdded], [UserIDAdded], [DateAcknowledged], [UserIDAcknowledged])
        SELECT   [APLogID],
                 [EntityType],
                 [EntityID],
                 [WebUserID],
                 [APType],
                 [Result],
                 [Details],
                 [Param1Name],
                 [Param1Value],
                 [Param2Name],
                 [Param2Value],
                 [Param3Name],
                 [Param3Value],
                 [Param4Name],
                 [Param4Value],
                 [Param5Name],
                 [Param5Value],
                 [DateAdded],
                 [UserIDAdded],
                 [DateAcknowledged],
                 [UserIDAcknowledged]
        FROM     [dbo].[tblAutoProvisionLog]
        ORDER BY [APLogID] ASC;
        SET IDENTITY_INSERT [dbo].[tmp_ms_xx_tblAutoProvisionLog] OFF;
    END

DROP TABLE [dbo].[tblAutoProvisionLog];

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_tblAutoProvisionLog]', N'tblAutoProvisionLog';

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_constraint_PK_tblAutoProvisionLog1]', N'PK_tblAutoProvisionLog', N'OBJECT';

COMMIT TRANSACTION;

SET TRANSACTION ISOLATION LEVEL READ COMMITTED;


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Starting rebuilding table [dbo].[tblCaseRecRetrieval]...';


GO
BEGIN TRANSACTION;

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

SET XACT_ABORT ON;

CREATE TABLE [dbo].[tmp_ms_xx_tblCaseRecRetrieval] (
    [RecRetrievalID]  INT           IDENTITY (1, 1) NOT NULL,
    [CaseNbr]         INT           NOT NULL,
    [RetrievalExtKey] VARCHAR (100) NULL,
    [DateAdded]       DATETIME      NULL,
    [UserIDAdded]     VARCHAR (15)  NULL,
    [DateEdited]      DATETIME      NULL,
    [UserIDEdited]    VARCHAR (15)  NULL,
    [ConfidenceValue] INT           NULL,
    [FirstName]       VARCHAR (50)  NULL,
    [LastName]        VARCHAR (50)  NULL,
    [FirmName]        VARCHAR (100) NULL,
    [ClaimNbr]        VARCHAR (50)  NULL,
    [DOB]             DATE          NULL,
    CONSTRAINT [tmp_ms_xx_constraint_PK_tblCaseRecRetrieval1] PRIMARY KEY CLUSTERED ([RecRetrievalID] ASC)
);

IF EXISTS (SELECT TOP 1 1 
           FROM   [dbo].[tblCaseRecRetrieval])
    BEGIN
        SET IDENTITY_INSERT [dbo].[tmp_ms_xx_tblCaseRecRetrieval] ON;
        INSERT INTO [dbo].[tmp_ms_xx_tblCaseRecRetrieval] ([RecRetrievalID], [CaseNbr], [RetrievalExtKey], [DateAdded], [UserIDAdded], [DateEdited], [UserIDEdited], [ConfidenceValue], [FirstName], [LastName], [FirmName], [ClaimNbr], [DOB])
        SELECT   [RecRetrievalID],
                 [CaseNbr],
                 [RetrievalExtKey],
                 [DateAdded],
                 [UserIDAdded],
                 [DateEdited],
                 [UserIDEdited],
                 [ConfidenceValue],
                 [FirstName],
                 [LastName],
                 [FirmName],
                 [ClaimNbr],
                 [DOB]
        FROM     [dbo].[tblCaseRecRetrieval]
        ORDER BY [RecRetrievalID] ASC;
        SET IDENTITY_INSERT [dbo].[tmp_ms_xx_tblCaseRecRetrieval] OFF;
    END

DROP TABLE [dbo].[tblCaseRecRetrieval];

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_tblCaseRecRetrieval]', N'tblCaseRecRetrieval';

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_constraint_PK_tblCaseRecRetrieval1]', N'PK_tblCaseRecRetrieval', N'OBJECT';

COMMIT TRANSACTION;

SET TRANSACTION ISOLATION LEVEL READ COMMITTED;


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Starting rebuilding table [dbo].[tblCaseRecRetrievalDocument]...';


GO
BEGIN TRANSACTION;

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

SET XACT_ABORT ON;

CREATE TABLE [dbo].[tmp_ms_xx_tblCaseRecRetrievalDocument] (
    [RecRetrievalDocumentID] INT           IDENTITY (1, 1) NOT NULL,
    [CaseNbr]                INT           NOT NULL,
    [RetrievalDocExtKey]     VARCHAR (100) NULL,
    [DateAdded]              DATETIME      NULL,
    [UserIDAdded]            VARCHAR (15)  NULL,
    [DateEdited]             DATETIME      NULL,
    [UserIDEdited]           VARCHAR (15)  NULL,
    [RetrievalStart]         DATETIME      NULL,
    [RetrievalEnd]           DATETIME      NULL,
    [CaseDocID]              INT           NULL,
    [RetrievalStatusID]      INT           CONSTRAINT [DF_tblCaseRecRetrievalDocument_RetrievalStatusID] DEFAULT ((0)) NOT NULL,
    [Description]            VARCHAR (200) NULL,
    [LastResponse]           VARCHAR (200) NULL,
    [Facility]               VARCHAR (200) NULL,
    [RecordType]             VARCHAR (50)  NULL,
    [FileVersion]            VARCHAR (25)  NULL,
    [FileType]               VARCHAR (50)  NULL,
    [RetrievalGroupID]       VARCHAR (100) NULL,
    CONSTRAINT [tmp_ms_xx_constraint_PK_tblCaseRecRetrievalDocument1] PRIMARY KEY CLUSTERED ([RecRetrievalDocumentID] ASC)
);

IF EXISTS (SELECT TOP 1 1 
           FROM   [dbo].[tblCaseRecRetrievalDocument])
    BEGIN
        SET IDENTITY_INSERT [dbo].[tmp_ms_xx_tblCaseRecRetrievalDocument] ON;
        INSERT INTO [dbo].[tmp_ms_xx_tblCaseRecRetrievalDocument] ([RecRetrievalDocumentID], [CaseNbr], [RetrievalDocExtKey], [DateAdded], [UserIDAdded], [DateEdited], [UserIDEdited], [RetrievalStart], [RetrievalEnd], [CaseDocID], [RetrievalStatusID], [Description], [LastResponse], [Facility], [RecordType], [FileVersion], [FileType], [RetrievalGroupID])
        SELECT   [RecRetrievalDocumentID],
                 [CaseNbr],
                 [RetrievalDocExtKey],
                 [DateAdded],
                 [UserIDAdded],
                 [DateEdited],
                 [UserIDEdited],
                 [RetrievalStart],
                 [RetrievalEnd],
                 [CaseDocID],
                 [RetrievalStatusID],
                 [Description],
                 [LastResponse],
                 [Facility],
                 [RecordType],
                 [FileVersion],
                 [FileType],
                 [RetrievalGroupID]
        FROM     [dbo].[tblCaseRecRetrievalDocument]
        ORDER BY [RecRetrievalDocumentID] ASC;
        SET IDENTITY_INSERT [dbo].[tmp_ms_xx_tblCaseRecRetrievalDocument] OFF;
    END

DROP TABLE [dbo].[tblCaseRecRetrievalDocument];

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_tblCaseRecRetrievalDocument]', N'tblCaseRecRetrievalDocument';

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_constraint_PK_tblCaseRecRetrievalDocument1]', N'PK_tblCaseRecRetrievalDocument', N'OBJECT';

COMMIT TRANSACTION;

SET TRANSACTION ISOLATION LEVEL READ COMMITTED;


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Starting rebuilding table [dbo].[tblCaseSLAAction]...';


GO
BEGIN TRANSACTION;

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

SET XACT_ABORT ON;

CREATE TABLE [dbo].[tmp_ms_xx_tblCaseSLAAction] (
    [CaseSLAActionID]     INT           IDENTITY (1, 1) NOT NULL,
    [CaseSLARuleDetailID] INT           NOT NULL,
    [DateAdded]           DATETIME      NOT NULL,
    [UserIDAdded]         VARCHAR (15)  NULL,
    [SLAActionID]         INT           NOT NULL,
    [Comment]             VARCHAR (100) NULL,
    [ForDSE]              BIT           CONSTRAINT [DF_tblCaseSLAAction_ForDSE] DEFAULT ((1)) NOT NULL,
    CONSTRAINT [tmp_ms_xx_constraint_PK_tblCaseSLAAction1] PRIMARY KEY CLUSTERED ([CaseSLAActionID] ASC)
);

IF EXISTS (SELECT TOP 1 1 
           FROM   [dbo].[tblCaseSLAAction])
    BEGIN
        SET IDENTITY_INSERT [dbo].[tmp_ms_xx_tblCaseSLAAction] ON;
        INSERT INTO [dbo].[tmp_ms_xx_tblCaseSLAAction] ([CaseSLAActionID], [CaseSLARuleDetailID], [DateAdded], [UserIDAdded], [SLAActionID], [Comment], [ForDSE])
        SELECT   [CaseSLAActionID],
                 [CaseSLARuleDetailID],
                 [DateAdded],
                 [UserIDAdded],
                 [SLAActionID],
                 [Comment],
                 [ForDSE]
        FROM     [dbo].[tblCaseSLAAction]
        ORDER BY [CaseSLAActionID] ASC;
        SET IDENTITY_INSERT [dbo].[tmp_ms_xx_tblCaseSLAAction] OFF;
    END

DROP TABLE [dbo].[tblCaseSLAAction];

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_tblCaseSLAAction]', N'tblCaseSLAAction';

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_constraint_PK_tblCaseSLAAction1]', N'PK_tblCaseSLAAction', N'OBJECT';

COMMIT TRANSACTION;

SET TRANSACTION ISOLATION LEVEL READ COMMITTED;


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[tblCaseSLAAction].[IX_tblCaseSLAAction_CaseSLARuleDetailID]...';


GO
CREATE NONCLUSTERED INDEX [IX_tblCaseSLAAction_CaseSLARuleDetailID]
    ON [dbo].[tblCaseSLAAction]([CaseSLARuleDetailID] ASC);


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Starting rebuilding table [dbo].[tblSLAAction]...';


GO
BEGIN TRANSACTION;

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

SET XACT_ABORT ON;

CREATE TABLE [dbo].[tmp_ms_xx_tblSLAAction] (
    [SLAActionID]    INT          IDENTITY (1, 1) NOT NULL,
    [Name]           VARCHAR (25) NULL,
    [RequireComment] BIT          CONSTRAINT [DF_tblSLAAction_RequireComment] DEFAULT ((0)) NOT NULL,
    [IsResolution]   BIT          CONSTRAINT [DF_tblSLAAction_IsResolution] DEFAULT ((0)) NOT NULL,
    CONSTRAINT [tmp_ms_xx_constraint_PK_tblSLAAction1] PRIMARY KEY CLUSTERED ([SLAActionID] ASC)
);

IF EXISTS (SELECT TOP 1 1 
           FROM   [dbo].[tblSLAAction])
    BEGIN
        SET IDENTITY_INSERT [dbo].[tmp_ms_xx_tblSLAAction] ON;
        INSERT INTO [dbo].[tmp_ms_xx_tblSLAAction] ([SLAActionID], [Name], [RequireComment], [IsResolution])
        SELECT   [SLAActionID],
                 [Name],
                 [RequireComment],
                 [IsResolution]
        FROM     [dbo].[tblSLAAction]
        ORDER BY [SLAActionID] ASC;
        SET IDENTITY_INSERT [dbo].[tmp_ms_xx_tblSLAAction] OFF;
    END

DROP TABLE [dbo].[tblSLAAction];

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_tblSLAAction]', N'tblSLAAction';

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_constraint_PK_tblSLAAction1]', N'PK_tblSLAAction', N'OBJECT';

COMMIT TRANSACTION;

SET TRANSACTION ISOLATION LEVEL READ COMMITTED;


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Starting rebuilding table [dbo].[tblSSOProfile]...';


GO
BEGIN TRANSACTION;

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

SET XACT_ABORT ON;

CREATE TABLE [dbo].[tmp_ms_xx_tblSSOProfile] (
    [Id]                       INT            IDENTITY (1, 1) NOT NULL,
    [EntityType]               CHAR (2)       NOT NULL,
    [EntityID]                 INT            NOT NULL,
    [SSOEntityID]              VARCHAR (255)  NULL,
    [SSOType]                  INT            NULL,
    [AuthType]                 INT            NULL,
    [IdentityProviderName]     VARCHAR (128)  NULL,
    [SAMLURL]                  VARCHAR (255)  NULL,
    [UserIDAdded]              VARCHAR (20)   NOT NULL,
    [DateAdded]                DATETIME       NOT NULL,
    [UserIDEdited]             VARCHAR (20)   NOT NULL,
    [DateEdited]               DATETIME       NOT NULL,
    [MatchType]                INT            NOT NULL,
    [Active]                   BIT            NOT NULL,
    [AllowAutoProvision]       BIT            NOT NULL,
    [AutoProvisionCompanyCode] INT            NULL,
    [AutoProvisionEmail]       VARCHAR (2048) NULL,
    [WebCompanyID]             INT            NULL,
    [DefaultEWTimeZoneID]      INT            NULL,
    CONSTRAINT [tmp_ms_xx_constraint_PK_tblSSOProfile1] PRIMARY KEY CLUSTERED ([Id] ASC)
);

IF EXISTS (SELECT TOP 1 1 
           FROM   [dbo].[tblSSOProfile])
    BEGIN
        SET IDENTITY_INSERT [dbo].[tmp_ms_xx_tblSSOProfile] ON;
        INSERT INTO [dbo].[tmp_ms_xx_tblSSOProfile] ([Id], [EntityType], [EntityID], [SSOEntityID], [SSOType], [AuthType], [IdentityProviderName], [SAMLURL], [UserIDAdded], [DateAdded], [UserIDEdited], [DateEdited], [MatchType], [Active], [AllowAutoProvision], [AutoProvisionCompanyCode], [AutoProvisionEmail], [WebCompanyID], [DefaultEWTimeZoneID])
        SELECT   [Id],
                 [EntityType],
                 [EntityID],
                 [SSOEntityID],
                 [SSOType],
                 [AuthType],
                 [IdentityProviderName],
                 [SAMLURL],
                 [UserIDAdded],
                 [DateAdded],
                 [UserIDEdited],
                 [DateEdited],
                 [MatchType],
                 [Active],
                 [AllowAutoProvision],
                 [AutoProvisionCompanyCode],
                 [AutoProvisionEmail],
                 [WebCompanyID],
                 [DefaultEWTimeZoneID]
        FROM     [dbo].[tblSSOProfile]
        ORDER BY [Id] ASC;
        SET IDENTITY_INSERT [dbo].[tmp_ms_xx_tblSSOProfile] OFF;
    END

DROP TABLE [dbo].[tblSSOProfile];

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_tblSSOProfile]', N'tblSSOProfile';

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_constraint_PK_tblSSOProfile1]', N'PK_tblSSOProfile', N'OBJECT';

COMMIT TRANSACTION;

SET TRANSACTION ISOLATION LEVEL READ COMMITTED;


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Starting rebuilding table [dbo].[tblWorkstation]...';


GO
BEGIN TRANSACTION;

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

SET XACT_ABORT ON;

CREATE TABLE [dbo].[tmp_ms_xx_tblWorkstation] (
    [WorkstationID]         INT           IDENTITY (1, 1) NOT NULL,
    [WorkstationName]       VARCHAR (250) NOT NULL,
    [Domain]                VARCHAR (25)  NULL,
    [IP]                    VARCHAR (15)  NULL,
    [DateEdited]            DATETIME      NULL,
    [DateLastLogin]         DATETIME      NULL,
    [LastWindowsUsername]   VARCHAR (100) NULL,
    [LastApp]               VARCHAR (100) NULL,
    [LoginCount]            INT           CONSTRAINT [DF_tblWorkstation_LoginCount] DEFAULT ((0)) NOT NULL,
    [OS]                    VARCHAR (100) NULL,
    [AvailFrameworkVersion] VARCHAR (20)  NULL,
    [Browser]               VARCHAR (100) NULL,
    [TotalPhysicalMB]       BIGINT        NULL,
    [AvailPhysicalMB]       BIGINT        NULL,
    [MonitorCount]          INT           NULL,
    [HorzRes]               INT           NULL,
    [VertRes]               INT           NULL,
    [ColorDepth]            INT           NULL,
    [FontSize]              INT           NULL,
    CONSTRAINT [tmp_ms_xx_constraint_PK_tblWorkstation1] PRIMARY KEY CLUSTERED ([WorkstationID] ASC)
);

IF EXISTS (SELECT TOP 1 1 
           FROM   [dbo].[tblWorkstation])
    BEGIN
        SET IDENTITY_INSERT [dbo].[tmp_ms_xx_tblWorkstation] ON;
        INSERT INTO [dbo].[tmp_ms_xx_tblWorkstation] ([WorkstationID], [WorkstationName], [Domain], [IP], [DateEdited], [DateLastLogin], [LastWindowsUsername], [LastApp], [LoginCount], [OS], [AvailFrameworkVersion], [Browser], [TotalPhysicalMB], [AvailPhysicalMB], [MonitorCount], [HorzRes], [VertRes], [ColorDepth], [FontSize])
        SELECT   [WorkstationID],
                 [WorkstationName],
                 [Domain],
                 [IP],
                 [DateEdited],
                 [DateLastLogin],
                 [LastWindowsUsername],
                 [LastApp],
                 [LoginCount],
                 [OS],
                 [AvailFrameworkVersion],
                 [Browser],
                 [TotalPhysicalMB],
                 [AvailPhysicalMB],
                 [MonitorCount],
                 [HorzRes],
                 [VertRes],
                 [ColorDepth],
                 [FontSize]
        FROM     [dbo].[tblWorkstation]
        ORDER BY [WorkstationID] ASC;
        SET IDENTITY_INSERT [dbo].[tmp_ms_xx_tblWorkstation] OFF;
    END

DROP TABLE [dbo].[tblWorkstation];

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_tblWorkstation]', N'tblWorkstation';

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_constraint_PK_tblWorkstation1]', N'PK_tblWorkstation', N'OBJECT';

COMMIT TRANSACTION;

SET TRANSACTION ISOLATION LEVEL READ COMMITTED;


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[tblWorkstation].[IX_tblWorkstation_WorkstationName]...';


GO
CREATE NONCLUSTERED INDEX [IX_tblWorkstation_WorkstationName]
    ON [dbo].[tblWorkstation]([WorkstationName] ASC);


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[tblAcctHeader].[IX_tblAcctHeader_DocumentTypeDocumentStatusCompanyCode]...';


GO
CREATE NONCLUSTERED INDEX [IX_tblAcctHeader_DocumentTypeDocumentStatusCompanyCode]
    ON [dbo].[tblAcctHeader]([DocumentType] ASC, [DocumentStatus] ASC, [CompanyCode] ASC)
    INCLUDE([DocumentNbr], [DocumentDate], [CaseNbr], [DocumentTotal], [DocumentCode], [ClientCode], [EWFacilityID], [BulkBillingID]);


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[tblAcctHeader].[IX_tblAcctHeader_EWFacilityID]...';


GO
CREATE NONCLUSTERED INDEX [IX_tblAcctHeader_EWFacilityID]
    ON [dbo].[tblAcctHeader]([EWFacilityID] ASC)
    INCLUDE([DocumentNbr], [CaseDocID]);


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[tblCase].[IX_tblCase_DefenseAttorneyCode]...';


GO
CREATE NONCLUSTERED INDEX [IX_tblCase_DefenseAttorneyCode]
    ON [dbo].[tblCase]([DefenseAttorneyCode] ASC);


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[tblCase].[IX_tblCase_DefParaLegal]...';


GO
CREATE NONCLUSTERED INDEX [IX_tblCase_DefParaLegal]
    ON [dbo].[tblCase]([DefParaLegal] ASC);


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[tblCase].[IX_tblCase_OfficeCode]...';


GO
CREATE NONCLUSTERED INDEX [IX_tblCase_OfficeCode]
    ON [dbo].[tblCase]([OfficeCode] ASC)
    INCLUDE([ChartNbr], [DoctorLocation], [ClientCode], [SchedulerCode], [Status], [CaseType], [ApptDate], [ClaimNbr], [PlaintiffAttorneyCode], [DefenseAttorneyCode], [ServiceCode], [DoctorCode], [DoctorSpecialty], [RecCode], [DoctorName], [CertMailNbr], [Jurisdiction], [TransCode], [DefParaLegal], [VenueID], [LanguageID], [ApptStatusID], [CaseApptID], [CertMailNbr2], [ExtCaseNbr], [EmployerID], [EmployerAddressID]);


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[tblCase].[IX_tblCase_PlaintiffAttorneyCode]...';


GO
CREATE NONCLUSTERED INDEX [IX_tblCase_PlaintiffAttorneyCode]
    ON [dbo].[tblCase]([PlaintiffAttorneyCode] ASC);


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[tblCase].[IX_tblCase_TransCode]...';


GO
CREATE NONCLUSTERED INDEX [IX_tblCase_TransCode]
    ON [dbo].[tblCase]([TransCode] ASC)
    INCLUDE([OfficeCode]);


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[tblCase].[IX_tblCase_WCBNbrOfficeCode]...';


GO
CREATE NONCLUSTERED INDEX [IX_tblCase_WCBNbrOfficeCode]
    ON [dbo].[tblCase]([WCBNbr] ASC, [OfficeCode] ASC)
    INCLUDE([ChartNbr], [DoctorLocation], [ClientCode], [SchedulerCode], [Status], [CaseType], [ApptDate], [ClaimNbr], [PlaintiffAttorneyCode], [DefenseAttorneyCode], [ServiceCode], [DoctorCode], [DoctorSpecialty], [RecCode], [DoctorName], [Jurisdiction], [TransCode], [DefParaLegal], [VenueID], [LanguageID], [ApptStatusID], [CaseApptID], [ExtCaseNbr], [EmployerID], [EmployerAddressID]);


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[tblCaseSLARuleDetail].[IX_tblCaseSLARuleDetail_CaseNbrSLARuleDetailID]...';


GO
CREATE NONCLUSTERED INDEX [IX_tblCaseSLARuleDetail_CaseNbrSLARuleDetailID]
    ON [dbo].[tblCaseSLARuleDetail]([CaseNbr] ASC, [SLARuleDetailID] ASC);


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[tblCompanyCertifiedMail].[IX_U_tblCompanyCertifiedMail_CompanyCodeCaseTypeCodeCertMailActivityID]...';


GO
CREATE UNIQUE NONCLUSTERED INDEX [IX_U_tblCompanyCertifiedMail_CompanyCodeCaseTypeCodeCertMailActivityID]
    ON [dbo].[tblCompanyCertifiedMail]([CompanyCode] ASC, [CaseTypeCode] ASC, [CertMailActivityID] ASC);


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[tblConfirmationResult].[IX_tblConfirmationResult_ConfirmationSystemIDResultCode]...';


GO
CREATE NONCLUSTERED INDEX [IX_tblConfirmationResult_ConfirmationSystemIDResultCode]
    ON [dbo].[tblConfirmationResult]([ConfirmationSystemID] ASC, [ResultCode] ASC);


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[tblDoctorBlockTimeDay].[IX_tblDoctorBlockTimeDay_ScheduleDateDoctorCodeLocationCode]...';


GO
CREATE NONCLUSTERED INDEX [IX_tblDoctorBlockTimeDay_ScheduleDateDoctorCodeLocationCode]
    ON [dbo].[tblDoctorBlockTimeDay]([ScheduleDate] ASC, [DoctorCode] ASC, [LocationCode] ASC);


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[tblEWTimeZone].[IX_U_tblEWTimeZone_Name]...';


GO
CREATE UNIQUE NONCLUSTERED INDEX [IX_U_tblEWTimeZone_Name]
    ON [dbo].[tblEWTimeZone]([Name] ASC);


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[tblEWTimeZoneAdjustmentRule].[IX_U_tblEWTimeZoneAdjustmentRule_EWTimeZoneIDDateStartDateEnd]...';


GO
CREATE UNIQUE NONCLUSTERED INDEX [IX_U_tblEWTimeZoneAdjustmentRule_EWTimeZoneIDDateStartDateEnd]
    ON [dbo].[tblEWTimeZoneAdjustmentRule]([EWTimeZoneID] ASC, [DateStart] ASC, [DateEnd] ASC);


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[tblExternalCommunications].[IX_tblExternalCommunications_BulkBillingIDCommunicationSent]...';


GO
CREATE NONCLUSTERED INDEX [IX_tblExternalCommunications_BulkBillingIDCommunicationSent]
    ON [dbo].[tblExternalCommunications]([BulkBillingID] ASC, [CommunicationSent] ASC);


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[tblExternalCommunications].[IX_tblExternalCommunications_CaseNbrCaseHistoryID]...';


GO
CREATE NONCLUSTERED INDEX [IX_tblExternalCommunications_CaseNbrCaseHistoryID]
    ON [dbo].[tblExternalCommunications]([CaseNbr] ASC, [CaseHistoryID] ASC);


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[tblLock].[IX_tblLock_TableTypeTableKey]...';


GO
CREATE NONCLUSTERED INDEX [IX_tblLock_TableTypeTableKey]
    ON [dbo].[tblLock]([TableType] ASC, [TableKey] ASC)
    INCLUDE([SessionID], [UserID]);


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[tblOfficeContact].[IX_U_tblOfficeContact_OfficeCodeDepartmentEWBusLineID]...';


GO
CREATE UNIQUE NONCLUSTERED INDEX [IX_U_tblOfficeContact_OfficeCodeDepartmentEWBusLineID]
    ON [dbo].[tblOfficeContact]([OfficeCode] ASC, [Department] ASC, [EWBusLineID] ASC);


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[tblSession].[IX_tblSession_SessionID]...';


GO
CREATE NONCLUSTERED INDEX [IX_tblSession_SessionID]
    ON [dbo].[tblSession]([SessionID] ASC);


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[DF_tblAcctQuote_ApproveViaEmail]...';


GO
ALTER TABLE [dbo].[tblAcctQuote]
    ADD CONSTRAINT [DF_tblAcctQuote_ApproveViaEmail] DEFAULT ((0)) FOR [ApproveViaEmail];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[DF_tblAcctQuote_ApproveViaFax]...';


GO
ALTER TABLE [dbo].[tblAcctQuote]
    ADD CONSTRAINT [DF_tblAcctQuote_ApproveViaFax] DEFAULT ((0)) FOR [ApproveViaFax];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[DF_tblAcctQuote_ApproveViaPhone]...';


GO
ALTER TABLE [dbo].[tblAcctQuote]
    ADD CONSTRAINT [DF_tblAcctQuote_ApproveViaPhone] DEFAULT ((0)) FOR [ApproveViaPhone];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[DF_tblAcctQuote_InformViaEmail]...';


GO
ALTER TABLE [dbo].[tblAcctQuote]
    ADD CONSTRAINT [DF_tblAcctQuote_InformViaEmail] DEFAULT ((0)) FOR [InformViaEmail];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[DF_tblAcctQuote_InformViaFax]...';


GO
ALTER TABLE [dbo].[tblAcctQuote]
    ADD CONSTRAINT [DF_tblAcctQuote_InformViaFax] DEFAULT ((0)) FOR [InformViaFax];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[DF_tblAcctQuote_InformViaPhone]...';


GO
ALTER TABLE [dbo].[tblAcctQuote]
    ADD CONSTRAINT [DF_tblAcctQuote_InformViaPhone] DEFAULT ((0)) FOR [InformViaPhone];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[DF_tblCaseSLARuleDetail_IsResolved]...';


GO
ALTER TABLE [dbo].[tblCaseSLARuleDetail]
    ADD CONSTRAINT [DF_tblCaseSLARuleDetail_IsResolved] DEFAULT ((0)) FOR [IsResolved];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[DF_tblDoctorBlockTimeDay_Active]...';


GO
ALTER TABLE [dbo].[tblDoctorBlockTimeDay]
    ADD CONSTRAINT [DF_tblDoctorBlockTimeDay_Active] DEFAULT ((0)) FOR [Active];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[DF_tblExceptionDefinition_AllSLARuleDetail]...';


GO
ALTER TABLE [dbo].[tblExceptionDefinition]
    ADD CONSTRAINT [DF_tblExceptionDefinition_AllSLARuleDetail] DEFAULT ((1)) FOR [AllSLARuleDetail];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[DF_tblNotifyAudience_DefaultPreferenceValue]...';


GO
ALTER TABLE [dbo].[tblNotifyAudience]
    ADD CONSTRAINT [DF_tblNotifyAudience_DefaultPreferenceValue] DEFAULT ((0)) FOR [DefaultPreferenceValue];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO

IF EXISTS (SELECT * FROM #tmpErrors) ROLLBACK TRANSACTION
GO
IF @@TRANCOUNT>0 BEGIN
PRINT N'The transacted portion of the database update succeeded.'
COMMIT TRANSACTION
END
ELSE PRINT N'The transacted portion of the database update failed.'
GO
DROP TABLE #tmpErrors
GO
PRINT N'Update complete.';


GO
